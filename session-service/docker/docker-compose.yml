# Session Service Docker Compose
# =============================================================================
# Service pings data-service health endpoint to check availability.
# Use root Makefile: make fresh (handles startup order)
# =============================================================================

services:
  session-service:
    build:
      context: ../..
      dockerfile: session-service/docker/Dockerfile
    container_name: barrest_session_service
    restart: unless-stopped
    ports:
      - "8087:8087"
    environment:
      - SERVER_HOST=0.0.0.0
      - SERVER_PORT=8087
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8087/api/v1/sessions/p/health"]
      interval: 1s
      timeout: 5s
      retries: 3
      start_period: 10s
    networks:
      - docker_barrest_network

networks:
  docker_barrest_network:
    external: true
